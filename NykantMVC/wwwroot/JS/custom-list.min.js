var x,i,j,l,ll,selElmnt,img,img2,c,shopOption,type,shop,shippingloading;x=document.getElementsByClassName("custom-list");l=x.length;var elem=document.getElementById("custom-list-options"),shippingdelivery_type=document.getElementById("shipping-delivery-type"),parcelshop_CompanyName=document.getElementById("parcelshop-CompanyName"),parcelshop_StreetName=document.getElementById("parcelshop-StreetName"),parcelshop_StreetName2=document.getElementById("parcelshop-StreetName2"),parcelshop_ZipCode=document.getElementById("parcelshop-ZipCode"),parcelshop_CityName=document.getElementById("parcelshop-CityName"),parcelshop_CountryCodeISO3166A2=document.getElementById("parcelshop-CountryCodeISO3166A2"),nearby_shops=document.getElementById("nearby-shops"),nearby_shops_modal=document.getElementById("nearby-shops-modal"),shipping_form=document.getElementById("shipping-form"),submit_button=document.getElementById("custom-list-button"),not_home=document.getElementById("not-home");for(submit_button.disabled=!0,shipping_method_summary.textContent=="Home"?shipping_method_summary.textContent="Til Leveringsaddressen med GLS":shipping_method_summary.textContent=="Shop"?shipping_method_summary.textContent="Til Pakkeshop med GLS":shipping_method_summary.textContent=="HomeDKI"&&(shipping_method_summary.textContent="Leveringsaddressen med DKI Pallegods"),i=0;i<l;i++)for(selElmnt=x[i].getElementsByTagName("select")[0],ll=selElmnt.length,j=1;j<ll;j++)c=document.createElement("div"),type=document.createElement("div"),type.setAttribute("class","delivery-type"),selElmnt.options[j].dataset.type=="Home"?(selElmnt.options[j].dataset.transtype="Til Leveringsaddressen med GLS",type.textContent="Til Leveringsaddressen med GLS"):selElmnt.options[j].dataset.type=="HomeDKI"?(selElmnt.options[j].dataset.transtype="Leveringsaddressen med DKI Pallegods",type.textContent="Leveringsaddressen med DKI Pallegods"):selElmnt.options[j].dataset.type=="Shop"&&(selElmnt.options[j].dataset.transtype="Til Pakkeshop med GLS",type.textContent="Til Pakkeshop med GLS"),shop=document.createElement("div"),shop.setAttribute("class","delivery-shop"),c.appendChild(type),c.appendChild(shop),c.setAttribute("class","custom-list-option notselected"),selElmnt.options[j].dataset.type=="Shop"&&(shopOption=c),c.addEventListener("click",function(){var i,n,r,t,u,f,e,o;for(t=this.parentNode.parentNode.getElementsByTagName("select")[0],u=t.length,n=1;n<u;n++)if(t.options[n].dataset.transtype===this.children[0].textContent){for(t.options[n].dataset.type=="Home"?shipping_method_summary.textContent="Til Leveringsaddressen med GLS":t.options[n].dataset.type=="HomeDKI"?shipping_method_summary.textContent="Leveringsaddressen med DKI Pallegods":t.options[n].dataset.type=="Shop"&&(shipping_method_summary.textContent="Til Pakkeshop med GLS"),t.selectedIndex=n,i=this.parentNode.getElementsByClassName("custom-list-option selected"),f=i.length,r=0;r<f;r++)i[r].setAttribute("class","custom-list-option notselected");if(this.setAttribute("class","custom-list-option selected"),t.options[n].dataset.type=="Home"){shippingdelivery_type.value="Home";not_home.style.display="block";submit_button.disabled=!1;break}else if(t.options[n].dataset.type=="Shop")shippingloading(!0),shippingdelivery_type.value="Shop",not_home.style.display="none",submit_button.disabled=!0;else if(t.options[n].dataset.type=="HomeDKI"){shippingdelivery_type.value="HomeDKI";not_home.style.display="block";submit_button.disabled=!1;break}t.options[n].dataset.type.includes("Shop")&&(e=shippingaddress_address.dataset.value,o=shippingaddress_postal.dataset.value,$.ajax({type:"POST",url:"/checkout/GetNearbyShopsJson",data:AddAntiforgeryToken({Street:e,ZipCode:o,CountryIso:"DK",Amount:5})}).then(function(n){for(var t=0;t<n.parcelshops.length;t++)nearby_shops.children.length<6&&(img=document.createElement("div"),img.setAttribute("class","shop"),img.style.zIndex="100",img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].companyName,img2.setAttribute("data-type","companyName"),img.appendChild(img2),img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].streetname,img2.setAttribute("data-type","streetname"),img.appendChild(img2),img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].streetname2,img2.setAttribute("data-type","streetname2"),img.appendChild(img2),img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].zipCode,img2.setAttribute("data-type","zipCode"),img.appendChild(img2),img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].cityName,img2.setAttribute("data-type","cityName"),img.appendChild(img2),img2=document.createElement("label"),img2.setAttribute("class","shop-label"),img2.style.pointerEvents="none",img2.textContent=n.parcelshops[t].countryCodeISO3166A2,img2.setAttribute("data-type","countryCodeISO3166A2"),img.appendChild(img2),img.addEventListener("click",function(n){for(var u,r=n.target.children,t=0;t<r.length;t++)u=r[t].getAttribute("data-type"),u=="companyName"?(parcelshop_CompanyName.dataset.value=r[t].textContent,parcelshop_CompanyName.value=r[t].textContent,i[0].children[1].textContent=r[t].textContent):u=="streetname"?(parcelshop_StreetName.dataset.value=r[t].textContent,parcelshop_StreetName.value=r[t].textContent):u=="streetname2"?(parcelshop_StreetName2.dataset.value=r[t].textContent,parcelshop_StreetName2.value=r[t].textContent):u=="zipCode"?(parcelshop_ZipCode.dataset.value=r[t].textContent,parcelshop_ZipCode.value=r[t].textContent):u=="cityName"?(parcelshop_CityName.dataset.value=r[t].textContent,parcelshop_CityName.value=r[t].textContent):u=="countryCodeISO3166A2"&&(parcelshop_CountryCodeISO3166A2.dataset.value=r[t].textContent,parcelshop_CountryCodeISO3166A2.value=r[t].textContent);nearby_shops_modal.style.display="none";submit_button.disabled=!1;shippingloading(!1)}),nearby_shops.appendChild(img));nearby_shops_modal.style.display="block"}));break}}),elem.appendChild(c);shippingloading=function(n){n?(document.querySelector("#shippingspinner").classList.remove("hidden"),document.getElementById("shipping-button-text").classList.add("hidden")):(document.querySelector("#shippingspinner").classList.add("hidden"),document.getElementById("shipping-button-text").classList.remove("hidden"))};